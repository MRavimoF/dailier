<html>
	<head>
		<style>
			body { font-size: 200% }
		</style>

		</head>
	<body>

		<h1>Daily participants:</h1>
		<div id="participants"></div>

		<h1>Transcript so far:</h1>
		<div id="transcript"></div>

	</body>


<script>
setTimeout(function(){ update(); },200);

function update() {

	getData("transcript", (data) =>
		{
			document.getElementById("transcript").innerHTML = 
		  '<ul>' +
		  data.sentences.map(it => `<li>${it}</li>`).join('') +
		  '</ul>';
		});

	getData("participants", (data) =>
		{
			document.getElementById("participants").innerHTML = 
		  '<ul>' +
		  data.participants.map(it => `<li>${it}</li>`).join('') +
		  '</ul>';
		});
	setTimeout(function(){ update(); }, 200);
}

function getData(resource, oncomplete) {
	var xmlhttp = new XMLHttpRequest();
	xmlhttp.onreadystatechange = function() {
  	if (this.readyState == 4 && this.status == 200) {
    		var myObj = JSON.parse(this.responseText);
		oncomplete(myObj);
  	}
	};
	xmlhttp.open("GET", "https://dailier.herokuapp.com/" + resource, true);
	xmlhttp.send();
}

</script>
	</html>
